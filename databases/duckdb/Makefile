# $NetBSD: Makefile,v 1.7 2025/01/01 10:22:38 ryoon Exp $

DISTNAME=	duckdb-1.1.3
CATEGORIES=	databases
MASTER_SITES=	${MASTER_SITE_GITHUB:=duckdb/}
GITHUB_PROJECT=	duckdb
GITHUB_TAG=	v${PKGVERSION_NOREV}

MAINTAINER=	ryoon@NetBSD.org
HOMEPAGE=	https://duckdb.org/
COMMENT=	In-process SQL OLAP database management system
LICENSE=	mit

USE_LANGUAGES=	c c++
USE_TOOLS+=	gmake

# for alloca(3)
FORCE_CXX_STD+=	gnu++11

CMAKE_CONFIGURE_ARGS+=	-DBUILD_CORE_FUNCTIONS_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_ICU_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_PARQUET_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_TPCH_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_TPCDS_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_FTS_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_HTTPFS_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_VISUALIZER_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_JSON_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_JEMALLOC_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_EXCEL_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_INET_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_BENCHMARKS=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_SQLSMITH_EXTENSION=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_TPCE=ON
CMAKE_CONFIGURE_ARGS+=	-DBUILD_AUTOCOMPLETE_EXTENSION=ON

.include "../../devel/cmake/build.mk"
.include "../../security/openssl/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
